name: Full Auto Release

on:
  push:
    branches:
      - main  # SpustÃ­ se automaticky pÅ™i kaÅ¾dÃ©m pushi do hlavnÃ­ vÄ›tve

permissions:
  contents: write  # NutnÃ© pro automatickÃ© nahrÃ¡vÃ¡nÃ­ balÃ­ÄkÅ¯

jobs:
  build-and-release:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout kÃ³du
        uses: actions/checkout@v4

      - name: NastavenÃ­ Deno
        uses: denoland/setup-deno@v1
        with:
          deno-version: v1.x

      - name: VytvoÅ™enÃ­ balÃ­Äku (ZIP)
        # ZabalÃ­ projekt a pojmenuje ho podle ÄÃ­sla buildu
        run: zip -r fixit-guru-build-${{ github.run_number }}.zip . -x "*.git*" ".github*"

      - name: AutomatickÃ© vytvoÅ™enÃ­ Release
        uses: softprops/action-gh-release@v1
        with:
          tag_name: b${{ github.run_number }}
          name: Auto-Build v${{ github.run_number }}
          body: |
            ### ğŸ¤– AutomatickÃ½ release systÃ©mu Fixit-guru
            Tato verze byla vygenerovÃ¡na automaticky pÅ™i pushi do vÄ›tve main.
            
            **Podrobnosti:**
            - ÄŒÃ­slo sestavenÃ­: ${{ github.run_number }}
            - Commit: ${{ github.sha }}
            - ÄŒas vygenerovÃ¡nÃ­: ${{ github.event.head_commit.timestamp }}
            
            VytvoÅ™eno pro komunitu Studio Synthesis | 2026
          draft: false
          prerelease: false
          files: |
            fixit-guru-build-${{ github.run_number }}.zip
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
